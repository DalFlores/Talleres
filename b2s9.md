# Taller Individual  3
## Reactive Stream

**Semana**: 9

**Objetivos**:

- Aplicar los conocimientos sobre Reactive Stream.
- Generar y procesar flujos de datos reactivos.

### Descripción:

Resuelva los siguientes problemas.

### Problema 1
**Sincronización de Sensores**

Descripción: Simula dos sensores que emiten valores periódicos:

- Sensor1: Rango [20°C, 30°C], cada 1 segundo.
- Sensor2: Rango [30°C, 40°C], cada 1.5 segundos.
- Usa zip para combinar los valores de ambos sensores en un solo flujo.
- Detén el flujo después de 10 pares de valores.
- Genera una alerta si la diferencia absoluta entre las lecturas de Sensor1 y Sensor2 es mayor a 5°C.
  

```mathematica
import rx.lang.scala.Observable
import scala.concurrent.duration._
import scala.util.Random

object Problema1 extends App {

  val rng = new Random()

  val sensor1 =
    Observable.interval(1.second)
      .map(_ => rng.between(20, 31))


  val sensor2 =
    Observable.interval(1500.millis)
      .map(_ => rng.between(30, 41))


  val flujo =
    sensor1.zip(sensor2).take(10)

  flujo.subscribe(
    { case (t1, t2) =>
      val diff = (t1 - t2).abs

      println(f"Sensor1: ${t1}°C, Sensor2: ${t2}°C, Difference: ${diff}°C")

      if (diff > 5)
        println(s"ALERT! Significant difference detected: ${diff}°C")

      println()
    },
    err => println(s"Error: ${err.getMessage}"),
    () => println("=== Problema 1 Completado ===")
  )

  Thread.sleep(18000)
}
```

### Problema 2
**Sistema de Alerta Complejo**

Descripción: Simula tres sensores que emiten datos periódicos:

- Sensor1: Temperatura (20°C a 30°C).
- Sensor2: Humedad (40% a 60%).
- Sensor3: Presión (950 hPa a 1050 hPa).
- Combina los datos de los tres sensores y detecta si alguna de las métricas está fuera de rango.
- Detén el flujo después de 20 combinaciones.

```yaml
import rx.lang.scala.Observable
import scala.concurrent.duration._
import scala.util.Random

object Problema2 extends App {
  val random = new Random()
  
  val sensor1 = Observable.interval(1.second)
    .map(_ => 20 + random.nextInt(11))

  val sensor2 = Observable.interval(1.second)
    .map(_ => 40 + random.nextInt(21))

  val sensor3 = Observable.interval(1.second)
    .map(_ => 950 + random.nextInt(101))

  Observable.zip(sensor1, sensor2, sensor3)
    .take(20)
    .subscribe(
      onNext = data => {
        val (temp, humidity, pressure) = data

        println(f"Temperature: ${temp}°C, Humidity: ${humidity}%%, Pressure: ${pressure} hPa")

        var alert = false

        if (temp < 20 || temp > 30) {
          println(s"ALERT! Temperature out of range: ${temp}°C")
          alert = true
        }

        if (humidity < 40 || humidity > 60) {
          println(s"ALERT! Humidity out of range: ${humidity}%")
          alert = true
        }

        if (pressure < 950 || pressure > 1050) {
          println(s"ALERT! Pressure out of range: ${pressure} hPa")
          alert = true
        }

        if (!alert) {
          println("All metrics within normal range")
        }

        println()
      },
      onError = e => println(s"Error: ${e.getMessage}"),
      onCompleted = () => println("=== Problema 2 Completado ===")
    )

  Thread.sleep(22000)
}
```

### Calificación:

Una vez que termine la primera parte (a lápiz y papel), debe presentar su trabajo a su docente para poder continuar con la segunda parte (última pregunta)

- 10 puntos si presenta en el horario de prácticas y experimentación.
- 7 puntos presenta en el horario de tutoría

La hora máxima de presentación será las 08h30
